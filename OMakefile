.PHONY: makelib testlib install testlib clean

FILES = mlresolv
LIB = mlresolv

section
   INCLUDES += $(shell $(OCAMLC) -where)
   mlresolv_stub$(EXT_OBJ):

CLIBNAME = libmlresolv_stub

section
   CCLIB = $(StaticCLibrary $(CLIBNAME), mlresolv_stub)
   OCAML_LIB_FLAGS += -cclib -lmlresolv_stub
   OCAMLLIBS = $(OCamlLibrary $(LIB), $(FILES))
   $(OCAMLLIBS): $(CCLIB)
   .DEFAULT: $(LIB)$(EXT_LIB)

IFILES[] =
   mlresolv

ALIBS = $(CLIBNAME)$(EXT_LIB)

LibInstall(makelib, $(LIB), $(IFILES), $(ALIBS))

install: makelib

.SUBDIRS: tests

clean:
   $(CLEAN)
